{% extends "layout.html" %}

{% block content %}
<div class="container-fluid">
    <div class="charts text-center">
        <svg id="Viz_area" height=350 width=500></svg>
    </div>
</div>


<script src="https://d3js.org/d3.v4.js"></script>    
<script>

    // SVG Set-up
    var w = 500;
    var h = 350;
    var barPadding = 1;
    var svg = d3.select("svg")
                .append("svg")
                .attr("width",w)
                .attr("height",h);

    // Bar Chart 
    var data = {{mydata}};

    svg.selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
    .attr("x", function(d,i) {
            return i*(w/data.length);
    })
    .attr("y",function(d) {return 300-d;})
    .attr("width",(w/data.length) - barPadding)
    .attr("height",function(d) {return d;})
    .attr("fill","teal");

    svg.selectAll("text")
    .data(data)
    .enter()
    .append("text")
    .text(function(d) {return d;})
    .attr("x", function(d,i) {return i*(w/data.length) + (w/data.length-barPadding)/2;})
    .attr("y", function(d) {return h-(d)-53;})
    .attr("font-family","sans-serif")
    .attr("font-size","10px")
    .attr("font-weight","bold")
    .attr("text-anchor","middle");

    // X-Axis
    var year = [1959,1961,1965,1967,1969,1971,1973,1975,1977,1979,1981,1983,1985,1987,1989,1991,1993,1995,1997,1999,2001,2003,2005,2007,2009,2011,2013,2015,2017,2019];
    var padding = 10;

    var xScale = d3.scaleBand()
        .domain(year)
        .range([0, w]);

    svg.append('g')
    .attr('transform', "translate(0," + (h-50) +")")
    .call(d3.axisBottom(xScale))
    .selectAll("text")   
    .style("text-anchor", "end")
    .attr("dx", "-0.7em")
    .attr("dy", "-0.7em")
    .attr("transform", "rotate(-90)");

    svg.append("text")
        .attr("class", "x label")
        .attr("text-anchor", "end")
        .attr("font-family","sans-serif")
        .attr("font-size","16px")
        .attr("font-weight","bold")
        .attr("x", w/2+ padding)
        .attr("y", h - 10)
        .text("year");
    // Set Title Name
    svg.append('text')
        .attr('x', w / 2 + padding)
        .attr('y', 40)
        .attr('text-anchor', 'middle')
        .attr("font-family","sans-serif")
        .text("Thailand's Gold Medal in SEA Games")
</script>
{% endblock %}